module "agent" {
  source             = "../node"
  cluster_name       = var.node_config.cluster_name
  node_name          = var.node_name
  template_vm        = var.template_vm
  template_vm_node   = var.template_vm_node
  bootstrap_server   = var.node_config.bootstrap_server
  datastore          = var.node_config.datastore
  snippets_datastore = var.node_config.snippets_datastore
  disk_size          = var.disk_size
  disk_full_clone    = var.disk_full_clone
  dns_server_list    = var.node_config.dns_server_list
  domain             = var.node_config.domain
  ip_list            = var.ip_list
  ipv4_gateway       = var.node_config.ipv4_gateway
  ipv4_netmask       = var.node_config.ipv4_netmask
  is_server          = false
  memory             = var.memory
  name_prefix        = "${var.node_config.cluster_name}-${var.name_prefix}"
  network_bridge     = var.node_config.network_bridge
  cpu_cores          = var.cpu_cores
  cpu_type           = var.node_config.cpu_type
  pool               = var.node_config.pool
  tags               = var.tags
  ha                 = var.ha
  rke2_version       = var.node_config.rke2_version
  rke2_config_file   = var.rke2_config_file
  registries_conf    = var.node_config.registries_conf
  rke2_token         = var.node_config.rke2_token
}
